EduFlow AI – Functional Requirements
AI-Enhanced Learning Orchestration (Phase 3)
0. Scope Clarification (IMPORTANT)

These requirements extend an existing EduFlow AI system with:

Event planning

Study sessions

Focus/break tracking

Do not redesign or replace existing functionality.
Only implement the additions specified below.

1. Emotional State Collection (Learning-Related)
1.1 Supported Dimensions (STRICT)

Collect only the following learning-related states:

energy_level: low | medium | high

stress_level: low | medium | high

focus_level: low | medium | high

No other emotions or psychological labels are allowed.

1.2 Data Sources
A. Self-Reported

Triggered:

At start of study day

At end of a study session

Input type:

Fixed choice only (no free text)

B. Inferred (Behavior-Based)

Derived from:

Early session termination

Repeated time overruns

Multiple task postponements

Must be marked as source = inferred

1.3 Data Model (REQUIRED)
EmotionalStateLog
- user (FK)
- timestamp
- energy_level
- stress_level
- focus_level
- source (self_report | inferred)

2. Diagnostic Test Upload & Analysis
2.1 Event Integration

An Event may have zero or one DiagnosticTest

Diagnostic tests can be:

Uploaded during event creation

Added after event creation

2.2 Supported Input (Phase 3)

PDF upload

Manual question entry

Each question must store:

question_text

correct_answer

user_answer

topic (optional)

2.3 AI Diagnostic Analysis (MANDATORY)

AI must:

Group incorrect answers by:

topic

error_type: conceptual | application | reasoning

Count frequency per group

AI must NOT:

Rate overall ability

Compare users

Use labels such as “weak student”

2.4 Diagnostic Output Schema (STRICT)
{
  "error_groups": [
    {
      "topic": "string",
      "error_type": "conceptual | application | reasoning",
      "error_count": number
    }
  ]
}

3. Diagnostic-Driven Study Session Generation
3.1 Session Creation Rules

From diagnostic analysis, generate review sessions:

Each session must:

Target one error group

Have a clear learning objective

Be linked to the originating event

3.2 Session Constraints

suggested_duration_minutes:

Minimum: 25

Maximum: 60

task_type:

concept_review | practice | revision

4. AI-Based Plan Adjustment (Emotion × Diagnostic × Behavior)
4.1 Trigger Conditions

Invoke AI orchestration only if at least one is true:

High stress detected

Repeated session overruns

Event flagged as “at risk”

Diagnostic error concentration detected

4.2 AI Responsibilities

AI may suggest:

Splitting tasks

Shortening session duration

Reordering tasks

Switching focus mode

AI must NOT:

Modify plans automatically

Start/stop timers

Delete sessions

4.3 Adjustment Output Schema (REQUIRED)
{
  "context": {
    "dominant_error_topic": "string",
    "emotional_state": {
      "energy": "low | medium | high",
      "stress": "low | medium | high"
    }
  },
  "adjustments": [
    {
      "type": "split | shorten | reorder | focus_mode_change",
      "target": "task_id or task_title",
      "new_duration_minutes": number
    }
  ],
  "rationale": "string"
}


rationale is mandatory.

5. Time Tracker Integration
5.1 Mandatory Linking

Every AI-generated or AI-adjusted study session must:

Be linked to:

Event

Diagnostic error group (if applicable)

Use the existing time tracker

5.2 Data Capture

Store:

Suggested duration

Actual duration

Completion status

Overrun delta

6. User Interaction Rules (NON-NEGOTIABLE)

AI suggestions must always:

Be visible

Be explainable

Require user confirmation

No silent changes

No forced adjustments

7. Architecture Constraints
7.1 AI Layer Isolation

AI logic must reside in:

ai/
 ├── prompts/
 ├── schemas/
 ├── services/


AI calls are prohibited in:

models

signals

database migrations

8. Acceptance Criteria

The implementation is considered complete if:

Emotional data is collected safely and minimally

Diagnostic errors generate targeted review sessions

AI suggestions are explainable and optional

Core scheduler and timer remain deterministic

No psychological or medical claims exist

9. Final Instruction to Claude Code

Follow these requirements literally

Do not infer missing features

Do not add unrequested intelligence

Prefer predictable behavior over creativity